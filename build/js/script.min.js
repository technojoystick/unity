"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e){e.MaskedInput=function(t){if(!t||!t.elm||!t.format)return null;if(!(this instanceof e.MaskedInput))return new e.MaskedInput(t);var n=this,r=t.elm,a=t.format,i=t.allowed||"0123456789",u=t.allowedfx||function(){return!0},s=t.separator||"/:-",o=t.typeon||"_YMDhms",c=t.onbadkey||function(){},l=t.onfilled||function(){},f=t.badkeywait||0,d=!t.hasOwnProperty("preserve")||!!t.preserve,h=!0,v=!1,g=a,p=window.addEventListener?function(e,t,n,r){e.addEventListener(t,n,void 0!==r&&r)}:window.attachEvent?function(e,t,n){e.attachEvent("on"+t,n)}:function(e,t,n){e["on"+t]=n},y=function(){for(var e=r.value.length-1;e>=0;e--)for(var t=0,n=o.length;t<n;t++)if(r.value[e]===o[t])return!1;return!0},b=function(e){try{if(e.focus(),e.selectionStart>=0)return e.selectionStart;if(document.selection){return-document.selection.createRange().moveStart("character",-e.value.length)}return-1}catch(e){return-1}},k=function(e,t){try{if(e.selectionStart)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.move("character",t),n.select()}}catch(e){return!1}return!0},m=function(e){var t="",n=(e=e||window.event).which,r=e.type;if(void 0!==n&&null!==n||(n=e.keyCode),void 0===n||null===n)return"";switch(n){case 8:t="bksp";break;case 46:t="keydown"===r?"del":".";break;case 16:t="shift";break;case 0:case 9:case 13:t="etc";break;case 37:case 38:case 39:case 40:t=e.shiftKey||39===e.charCode||void 0===e.charCode?String.fromCharCode(n):"etc";break;default:t=String.fromCharCode(n)}return t},C=function(e,t){e.preventDefault&&e.preventDefault(),e.returnValue=t||!1},_=function(e){var t=b(r),n=r.value,l="";switch(!0){case-1!==i.indexOf(e):if((t+=1)>a.length)return!1;for(;-1!==s.indexOf(n.charAt(t-1))&&t<=a.length;)t+=1;if(!u(e,t))return c(e),!1;l=n.substr(0,t-1)+e+n.substr(t),-1===i.indexOf(n.charAt(t))&&-1===o.indexOf(n.charAt(t))&&(t+=1);break;case"bksp"===e:if((t-=1)<0)return!1;for(;-1===i.indexOf(n.charAt(t))&&-1===o.indexOf(n.charAt(t))&&t>1;)t-=1;l=n.substr(0,t)+a.substr(t,1)+n.substr(t+1);break;case"del"===e:if(t>=n.length)return!1;for(;-1!==s.indexOf(n.charAt(t))&&""!==n.charAt(t);)t+=1;l=n.substr(0,t)+a.substr(t,1)+n.substr(t+1),t+=1;break;case"etc"===e:return!0;default:return!1}return r.value="",r.value=l,k(r,t),!1};return n.resetField=function(){r.value=a},n.setAllowed=function(e){i=e,n.resetField()},n.setFormat=function(e){a=e,n.resetField()},n.setSeparator=function(e){s=e,n.resetField()},n.setTypeon=function(e){o=e,n.resetField()},n.setEnabled=function(e){h=e},!r.tagName||"INPUT"!==r.tagName.toUpperCase()&&"TEXTAREA"!==r.tagName.toUpperCase()?null:(d&&""!==r.value||(r.value=a),p(r,"keydown",function(e){!function(e){if(!h)return!0;if(e=e||event,v)return C(e),!1;var t=m(e);!e.metaKey&&!e.ctrlKey||"X"!==t&&"V"!==t?!(!e.metaKey&&!e.ctrlKey)||(""===r.value&&(r.value=a,k(r,0)),"bksp"!==t&&"del"!==t||(_(t),C(e))):C(e)}(e)}),p(r,"keypress",function(e){!function(e){if(!h)return!0;if(e=e||event,v)return C(e),!1;var t=m(e);!!("etc"===t||e.metaKey||e.ctrlKey||e.altKey)||"bksp"!==t&&"del"!==t&&"shift"!==t&&(function(e){if(-1===i.indexOf(e)&&"bksp"!==e&&"del"!==e&&"etc"!==e){var t=b(r);return v=!0,c(e),setTimeout(function(){v=!1,k(r,t)},f),!1}return!0}(t)?_(t)?(y()&&l(),C(e,!0)):(y()&&l(),C(e)):C(e))}(e)}),p(r,"focus",function(){g=r.value}),p(r,"blur",function(){r.value!==g&&r.onchange&&r.onchange()}),n)}}(window),function(){var e=$(".login-form"),t=$(".genderRadio"),n=function(){function e(t){_classCallCheck(this,e),this.$el=$(t),this.inputUnits=this.$el.find(".input"),this.button=this.$el.find('button[type="submit"]'),this.init()}return _createClass(e,[{key:"init",value:function(){this.bindHandlers()}},{key:"bindHandlers",value:function(){var e=this;this.inputUnits.each(function(t,n){var r=$(n).find("input");r.data("valid",!1),r.on("keyup blur",function(t){var r=$(t.target),a=r.val();if(console.log(r,r.attr("requider")),r.attr("required")){e.validateInput(r,a)?(e.clearModifyers(r),$(n).addClass("_valid"),r.data("valid",!0)):(e.clearModifyers(r),$(n).addClass("_error"),r.data("valid",!1))}}),r.on("focus",function(t){var n=$(t.target);e.clearModifyers(n)})}),this.$el.on("submit",function(e){e.preventDefault(),console.log(e)})}},{key:"validateInput",value:function(e,t){var n=e.attr("type");return"email"===n?t.match(/^[0-9a-z-\.]+\@[0-9a-z-]{2,}\.[a-z]{2,}$/i):"password"===n?t.length>=5:t.length>=3}},{key:"clearModifyers",value:function(e){e.closest(".input").removeClass("_error _valid")}}]),e}(),r=function(){function e(t){_classCallCheck(this,e),this.$el=$(t),this.$units=this.$el.find(".genderRadio__unit"),this.toggler=this.$el.find(".genderRadio__toggler"),this.gender=null,this.init()}return _createClass(e,[{key:"init",value:function(){var e=this;this.$units.each(function(t,n){var r=$(n).find("input");r.attr("checked")&&(e.gender=r.val(),e.toggler.addClass("_"+e.gender)),r.on("change",function(t){var n=$(t.target).val();e.changeClass(n)})})}},{key:"changeClass",value:function(e){var t="_"+e;this.toggler.removeClass("_"+this.gender),this.toggler.addClass(t),this.gender=e}}]),e}();t.each(function(e,t){new r(t)}),e.each(function(e,t){new n(t)}),MaskedInput({elm:document.getElementById("phone"),format:"+7 (__) ___-__-__",separator:"+7 ()-"})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiYSIsIk1hc2tlZElucHV0IiwiZiIsImVsbSIsImZvcm1hdCIsInRoaXMiLCJvIiwiZCIsInMiLCJpIiwiYWxsb3dlZCIsImgiLCJhbGxvd2VkZngiLCJwIiwic2VwYXJhdG9yIiwibiIsInR5cGVvbiIsImMiLCJvbmJhZGtleSIsInEiLCJvbmZpbGxlZCIsInciLCJiYWRrZXl3YWl0IiwiQSIsImhhc093blByb3BlcnR5IiwicHJlc2VydmUiLCJsIiwieSIsInQiLCJqIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsIkUiLCJDIiwiRCIsIkIiLCJ1bmRlZmluZWQiLCJhdHRhY2hFdmVudCIsInUiLCJ2YWx1ZSIsImxlbmd0aCIsIngiLCJmb2N1cyIsInNlbGVjdGlvblN0YXJ0IiwiZG9jdW1lbnQiLCJzZWxlY3Rpb24iLCJjcmVhdGVSYW5nZSIsIm1vdmVTdGFydCIsImIiLCJzZXRTZWxlY3Rpb25SYW5nZSIsImNyZWF0ZVRleHRSYW5nZSIsIm1vdmUiLCJzZWxlY3QiLCJtIiwiZXZlbnQiLCJ3aGljaCIsInR5cGUiLCJrZXlDb2RlIiwic2hpZnRLZXkiLCJjaGFyQ29kZSIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsInYiLCJwcmV2ZW50RGVmYXVsdCIsInJldHVyblZhbHVlIiwiayIsIkYiLCJpbmRleE9mIiwiY2hhckF0Iiwic3Vic3RyIiwicmVzZXRGaWVsZCIsInNldEFsbG93ZWQiLCJzZXRGb3JtYXQiLCJzZXRTZXBhcmF0b3IiLCJzZXRUeXBlb24iLCJzZXRFbmFibGVkIiwidGFnTmFtZSIsInRvVXBwZXJDYXNlIiwibWV0YUtleSIsImN0cmxLZXkiLCJ6IiwiYWx0S2V5Iiwic2V0VGltZW91dCIsImciLCJlIiwib25jaGFuZ2UiLCIkZm9ybSIsIiQiLCIkZ2VuZGVyUmFkaW8iLCJGb3JtIiwiZWwiLCJfY2xhc3NDYWxsQ2hlY2siLCIkZWwiLCJpbnB1dFVuaXRzIiwiZmluZCIsImJ1dHRvbiIsImluaXQiLCJfY3JlYXRlQ2xhc3MiLCJrZXkiLCJiaW5kSGFuZGxlcnMiLCJfdGhpcyIsImVhY2giLCJpbmR4IiwiaXRlbSIsIiRpbnB1dCIsImRhdGEiLCJvbiIsIiR0YXJnZXQiLCJ0YXJnZXQiLCJ2YWwiLCJjb25zb2xlIiwibG9nIiwiYXR0ciIsInZhbGlkYXRlSW5wdXQiLCJjbGVhck1vZGlmeWVycyIsImFkZENsYXNzIiwiaW5wdXRUeXBlIiwibWF0Y2giLCJjbG9zZXN0IiwicmVtb3ZlQ2xhc3MiLCJnZW5kZXJSYWRpbyIsIiR1bml0cyIsInRvZ2dsZXIiLCJnZW5kZXIiLCJfdGhpczIiLCJjaGFuZ2VDbGFzcyIsImN1cnJlbnRDbGFzcyIsImdldEVsZW1lbnRCeUlkIl0sIm1hcHBpbmdzIjoiOFhBRUEsU0FBQUEsR0FBQUEsRUFBQUMsWUFBQSxTQUFBQyxHQUFBLElBQUFBLElBQUFBLEVBQUFDLE1BQUFELEVBQUFFLE9BQUEsT0FBQSxLQUFBLEtBQUFDLGdCQUFBTCxFQUFBQyxhQUFBLE9BQUEsSUFBQUQsRUFBQUMsWUFBQUMsR0FBQSxJQUFBSSxFQUFBRCxLQUFBRSxFQUFBTCxFQUFBQyxJQUFBSyxFQUFBTixFQUFBRSxPQUFBSyxFQUFBUCxFQUFBUSxTQUFBLGFBQUFDLEVBQUFULEVBQUFVLFdBQUEsV0FBQSxPQUFBLEdBQUFDLEVBQUFYLEVBQUFZLFdBQUEsTUFBQUMsRUFBQWIsRUFBQWMsUUFBQSxVQUFBQyxFQUFBZixFQUFBZ0IsVUFBQSxhQUFBQyxFQUFBakIsRUFBQWtCLFVBQUEsYUFBQUMsRUFBQW5CLEVBQUFvQixZQUFBLEVBQUFDLEdBQUFyQixFQUFBc0IsZUFBQSxlQUFBdEIsRUFBQXVCLFNBQUFDLEdBQUEsRUFBQUMsR0FBQSxFQUFBQyxFQUFBcEIsRUFBQXFCLEVBQUFDLE9BQUFDLGlCQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQUFILEVBQUFELGlCQUFBRSxFQUFBQyxPQUFBRSxJQUFBRCxHQUFBQSxJQUFBTCxPQUFBTyxZQUFBLFNBQUFILEVBQUFDLEVBQUFGLEdBQUFD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LEVBQUEsR0FrSEFoQyxFQUFBYSxLQUFBLFNBQUFDLEVBQUFDLEdBQ0EsSUFBQWlCLEVBQUFqQixLQUdBakIsRUFBQWUsS0FBQSxTQUFBQyxFQUFBQyxHQUNBLElBQUFkLEVBQUFjLEtBR0F0RyxhQUNBRSxJQUFBeUMsU0FBQW1GLGVBQUEsU0FDQTNILE9BQUEsb0JBQ0FVLFVBQUEsV0E3SEEiLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIG1hc2tlZF9pbnB1dF8xLjQtbWluLmpzXHJcbi8vIGFuZ2Vsd2F0dC5jb20vY29kaW5nL21hc2tlZF9pbnB1dC5waHBcclxuKGZ1bmN0aW9uKGEpe2EuTWFza2VkSW5wdXQ9ZnVuY3Rpb24oZil7aWYoIWZ8fCFmLmVsbXx8IWYuZm9ybWF0KXtyZXR1cm4gbnVsbH1pZighKHRoaXMgaW5zdGFuY2VvZiBhLk1hc2tlZElucHV0KSl7cmV0dXJuIG5ldyBhLk1hc2tlZElucHV0KGYpfXZhciBvPXRoaXMsZD1mLmVsbSxzPWYuZm9ybWF0LGk9Zi5hbGxvd2VkfHxcIjAxMjM0NTY3ODlcIixoPWYuYWxsb3dlZGZ4fHxmdW5jdGlvbigpe3JldHVybiB0cnVlfSxwPWYuc2VwYXJhdG9yfHxcIi86LVwiLG49Zi50eXBlb258fFwiX1lNRGhtc1wiLGM9Zi5vbmJhZGtleXx8ZnVuY3Rpb24oKXt9LHE9Zi5vbmZpbGxlZHx8ZnVuY3Rpb24oKXt9LHc9Zi5iYWRrZXl3YWl0fHwwLEE9Zi5oYXNPd25Qcm9wZXJ0eShcInByZXNlcnZlXCIpPyEhZi5wcmVzZXJ2ZTp0cnVlLGw9dHJ1ZSx5PWZhbHNlLHQ9cyxqPShmdW5jdGlvbigpe2lmKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKXtyZXR1cm4gZnVuY3Rpb24oRSxDLEQsQil7RS5hZGRFdmVudExpc3RlbmVyKEMsRCwoQj09PXVuZGVmaW5lZCk/ZmFsc2U6Qil9fWlmKHdpbmRvdy5hdHRhY2hFdmVudCl7cmV0dXJuIGZ1bmN0aW9uKEQsQixDKXtELmF0dGFjaEV2ZW50KFwib25cIitCLEMpfX1yZXR1cm4gZnVuY3Rpb24oRCxCLEMpe0RbXCJvblwiK0JdPUN9fSgpKSx1PWZ1bmN0aW9uKCl7Zm9yKHZhciBCPWQudmFsdWUubGVuZ3RoLTE7Qj49MDtCLS0pe2Zvcih2YXIgRD0wLEM9bi5sZW5ndGg7RDxDO0QrKyl7aWYoZC52YWx1ZVtCXT09PW5bRF0pe3JldHVybiBmYWxzZX19fXJldHVybiB0cnVlfSx4PWZ1bmN0aW9uKEMpe3RyeXtDLmZvY3VzKCk7aWYoQy5zZWxlY3Rpb25TdGFydD49MCl7cmV0dXJuIEMuc2VsZWN0aW9uU3RhcnR9aWYoZG9jdW1lbnQuc2VsZWN0aW9uKXt2YXIgQj1kb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtyZXR1cm4gLUIubW92ZVN0YXJ0KFwiY2hhcmFjdGVyXCIsLUMudmFsdWUubGVuZ3RoKX1yZXR1cm4gLTF9Y2F0Y2goRCl7cmV0dXJuIC0xfX0sYj1mdW5jdGlvbihDLEUpe3RyeXtpZihDLnNlbGVjdGlvblN0YXJ0KXtDLmZvY3VzKCk7Qy5zZXRTZWxlY3Rpb25SYW5nZShFLEUpfWVsc2V7aWYoQy5jcmVhdGVUZXh0UmFuZ2Upe3ZhciBCPUMuY3JlYXRlVGV4dFJhbmdlKCk7Qi5tb3ZlKFwiY2hhcmFjdGVyXCIsRSk7Qi5zZWxlY3QoKX19fWNhdGNoKEQpe3JldHVybiBmYWxzZX1yZXR1cm4gdHJ1ZX0sbT1mdW5jdGlvbihEKXtEPUR8fHdpbmRvdy5ldmVudDt2YXIgQz1cIlwiLEU9RC53aGljaCxCPUQudHlwZTtpZihFPT09dW5kZWZpbmVkfHxFPT09bnVsbCl7RT1ELmtleUNvZGV9aWYoRT09PXVuZGVmaW5lZHx8RT09PW51bGwpe3JldHVyblwiXCJ9c3dpdGNoKEUpe2Nhc2UgODpDPVwiYmtzcFwiO2JyZWFrO2Nhc2UgNDY6Qz0oQj09PVwia2V5ZG93blwiKT9cImRlbFwiOlwiLlwiO2JyZWFrO2Nhc2UgMTY6Qz1cInNoaWZ0XCI7YnJlYWs7Y2FzZSAwOmNhc2UgOTpjYXNlIDEzOkM9XCJldGNcIjticmVhaztjYXNlIDM3OmNhc2UgMzg6Y2FzZSAzOTpjYXNlIDQwOkM9KCFELnNoaWZ0S2V5JiYoRC5jaGFyQ29kZSE9PTM5JiZELmNoYXJDb2RlIT09dW5kZWZpbmVkKSk/XCJldGNcIjpTdHJpbmcuZnJvbUNoYXJDb2RlKEUpO2JyZWFrO2RlZmF1bHQ6Qz1TdHJpbmcuZnJvbUNoYXJDb2RlKEUpO2JyZWFrfXJldHVybiBDfSx2PWZ1bmN0aW9uKEIsQyl7aWYoQi5wcmV2ZW50RGVmYXVsdCl7Qi5wcmV2ZW50RGVmYXVsdCgpfUIucmV0dXJuVmFsdWU9Q3x8ZmFsc2V9LGs9ZnVuY3Rpb24oQil7dmFyIEQ9eChkKSxGPWQudmFsdWUsRT1cIlwiLEM9dHJ1ZTtzd2l0Y2goQyl7Y2FzZSAoaS5pbmRleE9mKEIpIT09LTEpOkQ9RCsxO2lmKEQ+cy5sZW5ndGgpe3JldHVybiBmYWxzZX13aGlsZShwLmluZGV4T2YoRi5jaGFyQXQoRC0xKSkhPT0tMSYmRDw9cy5sZW5ndGgpe0Q9RCsxfWlmKCFoKEIsRCkpe2MoQik7cmV0dXJuIGZhbHNlfUU9Ri5zdWJzdHIoMCxELTEpK0IrRi5zdWJzdHIoRCk7aWYoaS5pbmRleE9mKEYuY2hhckF0KEQpKT09PS0xJiZuLmluZGV4T2YoRi5jaGFyQXQoRCkpPT09LTEpe0Q9RCsxfWJyZWFrO2Nhc2UgKEI9PT1cImJrc3BcIik6RD1ELTE7aWYoRDwwKXtyZXR1cm4gZmFsc2V9d2hpbGUoaS5pbmRleE9mKEYuY2hhckF0KEQpKT09PS0xJiZuLmluZGV4T2YoRi5jaGFyQXQoRCkpPT09LTEmJkQ+MSl7RD1ELTF9RT1GLnN1YnN0cigwLEQpK3Muc3Vic3RyKEQsMSkrRi5zdWJzdHIoRCsxKTticmVhaztjYXNlIChCPT09XCJkZWxcIik6aWYoRD49Ri5sZW5ndGgpe3JldHVybiBmYWxzZX13aGlsZShwLmluZGV4T2YoRi5jaGFyQXQoRCkpIT09LTEmJkYuY2hhckF0KEQpIT09XCJcIil7RD1EKzF9RT1GLnN1YnN0cigwLEQpK3Muc3Vic3RyKEQsMSkrRi5zdWJzdHIoRCsxKTtEPUQrMTticmVhaztjYXNlIChCPT09XCJldGNcIik6cmV0dXJuIHRydWU7ZGVmYXVsdDpyZXR1cm4gZmFsc2V9ZC52YWx1ZT1cIlwiO2QudmFsdWU9RTtiKGQsRCk7cmV0dXJuIGZhbHNlfSxnPWZ1bmN0aW9uKEIpe2lmKGkuaW5kZXhPZihCKT09PS0xJiZCIT09XCJia3NwXCImJkIhPT1cImRlbFwiJiZCIT09XCJldGNcIil7dmFyIEM9eChkKTt5PXRydWU7YyhCKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7eT1mYWxzZTtiKGQsQyl9LHcpO3JldHVybiBmYWxzZX1yZXR1cm4gdHJ1ZX0sej1mdW5jdGlvbihDKXtpZighbCl7cmV0dXJuIHRydWV9Qz1DfHxldmVudDtpZih5KXt2KEMpO3JldHVybiBmYWxzZX12YXIgQj1tKEMpO2lmKChDLm1ldGFLZXl8fEMuY3RybEtleSkmJihCPT09XCJYXCJ8fEI9PT1cIlZcIikpe3YoQyk7cmV0dXJuIGZhbHNlfWlmKEMubWV0YUtleXx8Qy5jdHJsS2V5KXtyZXR1cm4gdHJ1ZX1pZihkLnZhbHVlPT09XCJcIil7ZC52YWx1ZT1zO2IoZCwwKX1pZihCPT09XCJia3NwXCJ8fEI9PT1cImRlbFwiKXtrKEIpO3YoQyk7cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfSxlPWZ1bmN0aW9uKEMpe2lmKCFsKXtyZXR1cm4gdHJ1ZX1DPUN8fGV2ZW50O2lmKHkpe3YoQyk7cmV0dXJuIGZhbHNlfXZhciBCPW0oQyk7aWYoQj09PVwiZXRjXCJ8fEMubWV0YUtleXx8Qy5jdHJsS2V5fHxDLmFsdEtleSl7cmV0dXJuIHRydWV9aWYoQiE9PVwiYmtzcFwiJiZCIT09XCJkZWxcIiYmQiE9PVwic2hpZnRcIil7aWYoIWcoQikpe3YoQyk7cmV0dXJuIGZhbHNlfWlmKGsoQikpe2lmKHUoKSl7cSgpfXYoQyx0cnVlKTtyZXR1cm4gdHJ1ZX1pZih1KCkpe3EoKX12KEMpO3JldHVybiBmYWxzZX1yZXR1cm4gZmFsc2V9LHI9ZnVuY3Rpb24oKXtpZighZC50YWdOYW1lfHwoZC50YWdOYW1lLnRvVXBwZXJDYXNlKCkhPT1cIklOUFVUXCImJmQudGFnTmFtZS50b1VwcGVyQ2FzZSgpIT09XCJURVhUQVJFQVwiKSl7cmV0dXJuIG51bGx9aWYoIUF8fGQudmFsdWU9PT1cIlwiKXtkLnZhbHVlPXN9aihkLFwia2V5ZG93blwiLGZ1bmN0aW9uKEIpe3ooQil9KTtqKGQsXCJrZXlwcmVzc1wiLGZ1bmN0aW9uKEIpe2UoQil9KTtqKGQsXCJmb2N1c1wiLGZ1bmN0aW9uKCl7dD1kLnZhbHVlfSk7aihkLFwiYmx1clwiLGZ1bmN0aW9uKCl7aWYoZC52YWx1ZSE9PXQmJmQub25jaGFuZ2Upe2Qub25jaGFuZ2UoKX19KTtyZXR1cm4gb307by5yZXNldEZpZWxkPWZ1bmN0aW9uKCl7ZC52YWx1ZT1zfTtvLnNldEFsbG93ZWQ9ZnVuY3Rpb24oQil7aT1CO28ucmVzZXRGaWVsZCgpfTtvLnNldEZvcm1hdD1mdW5jdGlvbihCKXtzPUI7by5yZXNldEZpZWxkKCl9O28uc2V0U2VwYXJhdG9yPWZ1bmN0aW9uKEIpe3A9QjtvLnJlc2V0RmllbGQoKX07by5zZXRUeXBlb249ZnVuY3Rpb24oQil7bj1CO28ucmVzZXRGaWVsZCgpfTtvLnNldEVuYWJsZWQ9ZnVuY3Rpb24oQil7bD1CfTtyZXR1cm4gcigpfX0od2luZG93KSk7XHJcblxyXG4oKCkgPT4ge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHRjb25zdCAkZm9ybSA9ICQoJy5sb2dpbi1mb3JtJyk7XHJcblx0Y29uc3QgJGdlbmRlclJhZGlvID0gJCgnLmdlbmRlclJhZGlvJyk7XHJcblxyXG5cdGNsYXNzIEZvcm0ge1xyXG5cdFx0Y29uc3RydWN0b3IoZWwpIHsgXHJcblx0XHRcdHRoaXMuJGVsID0gJChlbCk7XHJcblx0XHRcdHRoaXMuaW5wdXRVbml0cyA9IHRoaXMuJGVsLmZpbmQoJy5pbnB1dCcpO1xyXG5cdFx0XHR0aGlzLmJ1dHRvbiA9IHRoaXMuJGVsLmZpbmQoJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJylcclxuXHJcblx0XHRcdHRoaXMuaW5pdCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGluaXQoKSB7XHJcblx0XHRcdHRoaXMuYmluZEhhbmRsZXJzKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0YmluZEhhbmRsZXJzKCkge1xyXG5cclxuXHRcdFx0dGhpcy5pbnB1dFVuaXRzLmVhY2goKGluZHgsIGl0ZW0pID0+IHtcclxuXHRcdFx0XHRjb25zdCAkaW5wdXQgPSAkKGl0ZW0pLmZpbmQoJ2lucHV0Jyk7XHJcblx0XHRcdFx0JGlucHV0LmRhdGEoJ3ZhbGlkJywgZmFsc2UpO1xyXG5cclxuXHRcdFx0XHQkaW5wdXQub24oJ2tleXVwIGJsdXInLCAoZSkgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgJHRhcmdldCA9ICQoZS50YXJnZXQpO1xyXG5cdFx0XHRcdFx0Y29uc3QgdmFsdWUgPSAkdGFyZ2V0LnZhbCgpO1xyXG5cclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCR0YXJnZXQsICR0YXJnZXQuYXR0cigncmVxdWlkZXInKSk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCAkdGFyZ2V0LmF0dHIoJ3JlcXVpcmVkJykgKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHZhbGlkID0gdGhpcy52YWxpZGF0ZUlucHV0KCR0YXJnZXQsIHZhbHVlKTtcclxuXHJcblx0XHRcdFx0XHRcdGlmICh2YWxpZCkge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMuY2xlYXJNb2RpZnllcnMoJHRhcmdldCk7XHJcblx0XHRcdFx0XHRcdFx0JChpdGVtKS5hZGRDbGFzcygnX3ZhbGlkJyk7XHJcblx0XHRcdFx0XHRcdFx0JHRhcmdldC5kYXRhKCd2YWxpZCcsIHRydWUpO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMuY2xlYXJNb2RpZnllcnMoJHRhcmdldCk7XHJcblx0XHRcdFx0XHRcdFx0JChpdGVtKS5hZGRDbGFzcygnX2Vycm9yJyk7XHJcblx0XHRcdFx0XHRcdFx0JHRhcmdldC5kYXRhKCd2YWxpZCcsIGZhbHNlKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHQkaW5wdXQub24oJ2ZvY3VzJywgKGUpID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0ICR0YXJnZXQgPSAkKGUudGFyZ2V0KTtcclxuXHRcdFx0XHRcdHRoaXMuY2xlYXJNb2RpZnllcnMoJHRhcmdldCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dGhpcy4kZWwub24oJ3N1Ym1pdCcsIChlKSA9PiB7XHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGUpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHR2YWxpZGF0ZUlucHV0KHRhcmdldCwgdmFsdWUpIHtcclxuXHRcdFx0Y29uc3QgaW5wdXRUeXBlID0gdGFyZ2V0LmF0dHIoJ3R5cGUnKTtcclxuXHJcblx0XHRcdGlmIChpbnB1dFR5cGUgPT09ICdlbWFpbCcpIHtcclxuXHRcdFx0XHRyZXR1cm4gdmFsdWUubWF0Y2goL15bMC05YS16LVxcLl0rXFxAWzAtOWEtei1dezIsfVxcLlthLXpdezIsfSQvaSk7XHJcblx0XHRcdH0gZWxzZSBpZiAoaW5wdXRUeXBlID09PSAncGFzc3dvcmQnKSB7XHJcblx0XHRcdFx0cmV0dXJuIHZhbHVlLmxlbmd0aCA+PSA1O1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJldHVybiB2YWx1ZS5sZW5ndGggPj0gMztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGNsZWFyTW9kaWZ5ZXJzKHRhcmdldCkge1xyXG5cdFx0XHRjb25zdCBwYXJlbnQgPSB0YXJnZXQuY2xvc2VzdCgnLmlucHV0Jyk7XHJcblx0XHRcdHBhcmVudC5yZW1vdmVDbGFzcygnX2Vycm9yIF92YWxpZCcpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Y2xhc3MgZ2VuZGVyUmFkaW8ge1xyXG5cdFx0Y29uc3RydWN0b3IoZWwpIHtcclxuXHRcdFx0dGhpcy4kZWwgPSAkKGVsKTtcclxuXHRcdFx0dGhpcy4kdW5pdHMgPSB0aGlzLiRlbC5maW5kKCcuZ2VuZGVyUmFkaW9fX3VuaXQnKTtcclxuXHRcdFx0dGhpcy50b2dnbGVyID0gdGhpcy4kZWwuZmluZCgnLmdlbmRlclJhZGlvX190b2dnbGVyJyk7XHJcblxyXG5cdFx0XHR0aGlzLmdlbmRlciA9IG51bGw7XHJcblxyXG5cdFx0XHR0aGlzLmluaXQoKTtcclxuXHRcdH1cclxuXHJcblx0XHRpbml0KCkge1xyXG5cdFx0XHR0aGlzLiR1bml0cy5lYWNoKChpbmR4LCBpdGVtKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgJGlucHV0ID0gJChpdGVtKS5maW5kKCdpbnB1dCcpO1xyXG5cclxuXHRcdFx0XHRpZiAoICRpbnB1dC5hdHRyKCdjaGVja2VkJykgKSB7XHJcblx0XHRcdFx0XHR0aGlzLmdlbmRlciA9ICRpbnB1dC52YWwoKTtcclxuXHRcdFx0XHRcdHRoaXMudG9nZ2xlci5hZGRDbGFzcyhgXyR7dGhpcy5nZW5kZXJ9YCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQkaW5wdXQub24oJ2NoYW5nZScsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCAkdGFyZ2V0ID0gJChlLnRhcmdldCk7XHJcblx0XHRcdFx0XHRjb25zdCB2YWx1ZSA9ICR0YXJnZXQudmFsKCk7XHJcblxyXG5cdFx0XHRcdFx0dGhpcy5jaGFuZ2VDbGFzcyh2YWx1ZSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNoYW5nZUNsYXNzKHZhbHVlKSB7XHJcblx0XHRcdGNvbnN0IGN1cnJlbnRDbGFzcyA9IGBfJHt2YWx1ZX1gO1xyXG5cclxuXHRcdFx0dGhpcy50b2dnbGVyLnJlbW92ZUNsYXNzKGBfJHt0aGlzLmdlbmRlcn1gKTtcclxuXHRcdFx0dGhpcy50b2dnbGVyLmFkZENsYXNzKGN1cnJlbnRDbGFzcyk7XHJcblxyXG5cdFx0XHR0aGlzLmdlbmRlciA9IHZhbHVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0JGdlbmRlclJhZGlvLmVhY2goKGluZHgsIGl0ZW0pID0+IHtcclxuXHRcdG5ldyBnZW5kZXJSYWRpbyhpdGVtKTtcclxuXHR9KTtcclxuXHJcblx0JGZvcm0uZWFjaCgoaW5keCwgaXRlbSkgPT4ge1xyXG5cdFx0bmV3IEZvcm0oaXRlbSk7XHJcblx0fSk7XHJcblxyXG5cdE1hc2tlZElucHV0KHtcclxuICAgICAgZWxtOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGhvbmUnKSwgLy8gc2VsZWN0IG9ubHkgYnkgaWRcclxuICAgICAgZm9ybWF0OiAnKzcgKF9fKSBfX18tX18tX18nLFxyXG4gICAgICBzZXBhcmF0b3I6ICcrNyAoKS0nXHJcbiAgIH0pO1xyXG5cclxufSkoKTtcclxuXHJcblxyXG4iXX0=
